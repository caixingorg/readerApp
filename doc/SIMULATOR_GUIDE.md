# ğŸ“± æ¨¡æ‹Ÿå™¨æ–‡ä»¶å¯¼å…¥æŒ‡å—

## ğŸ¯ é—®é¢˜è¯´æ˜

åœ¨æ¨¡æ‹Ÿå™¨ä¸­ä½¿ç”¨ Document Picker æ—¶ï¼Œå¯èƒ½çœ‹ä¸åˆ°æ–‡ä»¶æˆ–æ— æ³•é€‰æ‹©æ–‡ä»¶ã€‚è¿™æ˜¯å› ä¸ºï¼š

1. **iOS æ¨¡æ‹Ÿå™¨**ï¼šæ–‡ä»¶ç³»ç»Ÿä¸çœŸæœºä¸åŒï¼Œéœ€è¦å…ˆæ·»åŠ æ–‡ä»¶åˆ°æ¨¡æ‹Ÿå™¨
2. **Android æ¨¡æ‹Ÿå™¨**ï¼šæŸäº›æ–‡ä»¶ç±»å‹å¯èƒ½è¢«è¿‡æ»¤
3. **æƒé™é™åˆ¶**ï¼šæ¨¡æ‹Ÿå™¨çš„æ²™ç›’ç¯å¢ƒæ¯”çœŸæœºæ›´ä¸¥æ ¼

## ğŸ“‹ è§£å†³æ–¹æ¡ˆ

### iOS æ¨¡æ‹Ÿå™¨

#### æ–¹æ³• 1: æ‹–æ‹½æ–‡ä»¶ï¼ˆæ¨èï¼‰

1. **å‡†å¤‡æµ‹è¯•æ–‡ä»¶**
   - åœ¨ Mac ä¸Šå‡†å¤‡å¥½ `.txt` æˆ– `.epub` æ–‡ä»¶
   - ä¾‹å¦‚ï¼šåˆ›å»ºä¸€ä¸ªç®€å•çš„ `test.txt` æ–‡ä»¶

2. **æ·»åŠ æ–‡ä»¶åˆ°æ¨¡æ‹Ÿå™¨**
   ```bash
   # æ‰“å¼€æ¨¡æ‹Ÿå™¨åï¼Œç›´æ¥å°†æ–‡ä»¶æ‹–æ‹½åˆ°æ¨¡æ‹Ÿå™¨çª—å£
   # æ–‡ä»¶ä¼šè¢«ä¿å­˜åˆ° Files appï¼ˆæ–‡ä»¶åº”ç”¨ï¼‰ä¸­
   ```

3. **ä½¿ç”¨ Files App**
   - åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€ **Files**ï¼ˆæ–‡ä»¶ï¼‰åº”ç”¨
   - ç‚¹å‡» "On My iPhone" æˆ– "On My iPad"
   - ç¡®è®¤æ–‡ä»¶å·²ç»å‡ºç°åœ¨é‚£é‡Œ

4. **åœ¨åº”ç”¨ä¸­å¯¼å…¥**
   - æ‰“å¼€ Reader App
   - ç‚¹å‡»"å¯¼å…¥"
   - åœ¨æ–‡ä»¶é€‰æ‹©å™¨ä¸­é€‰æ‹© "On My iPhone/iPad"
   - é€‰æ‹©åˆšæ‰æ‹–æ‹½çš„æ–‡ä»¶

#### æ–¹æ³• 2: ä½¿ç”¨ Safari ä¸‹è½½

1. åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€ Safari
2. è®¿é—®ä»»ä½•å¯ä»¥ä¸‹è½½ epub/txt æ–‡ä»¶çš„ç½‘ç«™
3. ä¸‹è½½æ–‡ä»¶åˆ° iCloud Drive æˆ– "On My iPhone"
4. åœ¨ Reader App ä¸­å¯¼å…¥

#### æ–¹æ³• 3: ä½¿ç”¨ iCloud Drive

1. åœ¨ Mac ä¸Šå°†æ–‡ä»¶æ”¾åˆ° iCloud Drive
2. ç­‰å¾…åŒæ­¥åˆ°æ¨¡æ‹Ÿå™¨
3. åœ¨ Files app ä¸­çš„ iCloud Drive æ‰¾åˆ°æ–‡ä»¶
4. åœ¨ Reader App ä¸­å¯¼å…¥

### Android æ¨¡æ‹Ÿå™¨

#### æ–¹æ³• 1: é€šè¿‡ adb æ¨é€æ–‡ä»¶

```bash
# æ‰¾åˆ°æµ‹è¯•æ–‡ä»¶è·¯å¾„
# æ¨é€åˆ°æ¨¡æ‹Ÿå™¨çš„ Downloads ç›®å½•
adb push /path/to/your/test.txt /sdcard/Download/

# æˆ–è€…æ¨é€åˆ° Documents
adb push /path/to/your/book.epub /sdcard/Documents/
```

#### æ–¹æ³• 2: ä½¿ç”¨ Android Studio Device File Explorer

1. æ‰“å¼€ Android Studio
2. ç‚¹å‡» **View** â†’ **Tool Windows** â†’ **Device File Explorer**
3. å¯¼èˆªåˆ° `/sdcard/Download/` æˆ– `/sdcard/Documents/`
4. å³é”®ç‚¹å‡»æ–‡ä»¶å¤¹ï¼Œé€‰æ‹© **Upload**
5. ä¸Šä¼ ä½ çš„æµ‹è¯•æ–‡ä»¶

#### æ–¹æ³• 3: åœ¨æ¨¡æ‹Ÿå™¨ä¸­ä¸‹è½½

1. åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ‰“å¼€ Chrome æµè§ˆå™¨
2. ä¸‹è½½æµ‹è¯•æ–‡ä»¶
3. æ–‡ä»¶ä¼šä¿å­˜åˆ° Downloads æ–‡ä»¶å¤¹
4. åœ¨ Reader App ä¸­å¯¼å…¥æ—¶é€‰æ‹© Downloads

## ğŸ”§ ä»£ç å·²ä¼˜åŒ–

æˆ‘å·²ç»è°ƒæ•´äº†æ–‡ä»¶ç±»å‹é…ç½®ï¼Œä½¿å…¶åœ¨æ¨¡æ‹Ÿå™¨ä¸­æ›´å®½æ¾ï¼š

```typescript
ios: {
    // ä½¿ç”¨ 'public.data' å’Œ 'public.item' ä»¥æ˜¾ç¤ºæ›´å¤šæ–‡ä»¶
    type: ['public.data', 'public.text', 'org.idpf.epub-container', 'public.item'],
    copyToCacheDirectory: true,
    multiple: false,
}

android: {
    // ä½¿ç”¨é€šé…ç¬¦æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶
    type: ['*/*'],
    copyToCacheDirectory: true,
    multiple: false,
}
```

## ğŸ“ å¿«é€Ÿæµ‹è¯•æ­¥éª¤

### iOS æ¨¡æ‹Ÿå™¨å®Œæ•´æµç¨‹

```bash
# 1. åˆ›å»ºæµ‹è¯•æ–‡ä»¶
echo "è¿™æ˜¯ä¸€æœ¬æµ‹è¯•ä¹¦ç±çš„å†…å®¹ã€‚" > test.txt

# 2. å¯åŠ¨åº”ç”¨
npm run ios

# 3. å°† test.txt æ‹–æ‹½åˆ°æ¨¡æ‹Ÿå™¨çª—å£

# 4. åœ¨æ¨¡æ‹Ÿå™¨ä¸­ï¼š
#    - æ‰“å¼€ Files appï¼Œç¡®è®¤æ–‡ä»¶åœ¨ "On My iPhone"
#    - æ‰“å¼€ Reader App
#    - ç‚¹å‡»"å¯¼å…¥"
#    - é€‰æ‹© test.txt
```

### Android æ¨¡æ‹Ÿå™¨å®Œæ•´æµç¨‹

```bash
# 1. åˆ›å»ºæµ‹è¯•æ–‡ä»¶
echo "è¿™æ˜¯ä¸€æœ¬æµ‹è¯•ä¹¦ç±çš„å†…å®¹ã€‚" > test.txt

# 2. å¯åŠ¨åº”ç”¨
npm run android

# 3. æ¨é€æ–‡ä»¶åˆ°æ¨¡æ‹Ÿå™¨
adb push test.txt /sdcard/Download/

# 4. åœ¨ Reader App ä¸­ç‚¹å‡»"å¯¼å…¥"ï¼Œé€‰æ‹© Downloads ä¸­çš„æ–‡ä»¶
```

## ğŸ¨ æµ‹è¯•æ–‡ä»¶ç¤ºä¾‹

### ç®€å• TXT æ–‡ä»¶
```bash
cat > æµ‹è¯•å°è¯´.txt << 'EOF'
ç¬¬ä¸€ç«  å¼€å§‹

è¿™æ˜¯ç¬¬ä¸€ç« çš„å†…å®¹ã€‚
æ•…äº‹ä»ä¸€ä¸ªå¹³å‡¡çš„æ—©æ™¨å¼€å§‹ã€‚

ç¬¬äºŒç«  å†’é™©

ä¸»è§’è¸ä¸Šäº†æœªçŸ¥çš„æ—…ç¨‹ã€‚
EOF
```

### æœ€å° EPUB æ–‡ä»¶
å¦‚æœéœ€è¦æµ‹è¯• EPUBï¼Œå¯ä»¥ä»è¿™äº›åœ°æ–¹ä¸‹è½½ï¼š
- [Gutenberg.org](https://www.gutenberg.org/) - å…è´¹ç”µå­ä¹¦
- [FeedBooks](https://www.feedbooks.com/publicdomain) - å…¬å…±é¢†åŸŸä¹¦ç±

## âš ï¸ å¸¸è§é—®é¢˜

### Q1: æ‹–æ‹½æ–‡ä»¶ååœ¨ Files app ä¸­æ‰¾ä¸åˆ°ï¼Ÿ
**A**: ç¡®ä¿æ‹–æ‹½åˆ°æ¨¡æ‹Ÿå™¨çš„ä¸»å±å¹•ï¼Œè€Œä¸æ˜¯åº”ç”¨å†…éƒ¨ã€‚æ–‡ä»¶ä¼šè‡ªåŠ¨ä¿å­˜åˆ° Files app çš„ "On My iPhone/iPad" ä½ç½®ã€‚

### Q2: Android æ¨¡æ‹Ÿå™¨ adb å‘½ä»¤ä¸å¯ç”¨ï¼Ÿ
**A**: ç¡®ä¿å·²æ·»åŠ  Android SDK åˆ° PATHï¼š
```bash
export ANDROID_HOME=$HOME/Library/Android/sdk
export PATH=$PATH:$ANDROID_HOME/platform-tools
```

### Q3: æ–‡ä»¶é€‰æ‹©å™¨æ‰“å¼€åæ˜¯ç©ºçš„ï¼Ÿ
**A**: 
- iOS: æ£€æŸ¥ Files appï¼Œç¡®ä¿æ–‡ä»¶åœ¨ "On My iPhone"
- Android: ä½¿ç”¨ `type: ['*/*']` æ˜¾ç¤ºæ‰€æœ‰æ–‡ä»¶
- å°è¯•é‡å¯åº”ç”¨

### Q4: å¯¼å…¥åæç¤º"ä¸æ”¯æŒçš„æ–‡ä»¶æ ¼å¼"ï¼Ÿ
**A**: ç¡®ä¿æ–‡ä»¶æ‰©å±•åæ­£ç¡®ï¼š
```bash
# æ­£ç¡®çš„æ–‡ä»¶å
âœ… test.txt
âœ… book.epub

# å¯èƒ½æœ‰é—®é¢˜çš„æ–‡ä»¶å
âŒ test (æ²¡æœ‰æ‰©å±•å)
âŒ test.pdf (ä¸æ”¯æŒçš„æ ¼å¼)
```

## ğŸš€ çœŸæœºæµ‹è¯•ï¼ˆå¼ºçƒˆæ¨èï¼‰

æ¨¡æ‹Ÿå™¨å§‹ç»ˆæœ‰é™åˆ¶ï¼Œ**å¼ºçƒˆå»ºè®®ä½¿ç”¨çœŸæœºæµ‹è¯•**ï¼š

### iOS çœŸæœº
```bash
# è¿æ¥ iPhone åˆ° Mac
npm run ios -- --device "Your iPhone Name"
```

### Android çœŸæœº
```bash
# å¯ç”¨ USB è°ƒè¯•åè¿æ¥è®¾å¤‡
npm run android
```

çœŸæœºä¸Šçš„ Document Picker å·¥ä½œæ–¹å¼ï¼š
- âœ… å¯ä»¥è®¿é—®æ‰€æœ‰æ–‡ä»¶åº”ç”¨ï¼ˆFiles, iCloud, Google Drive, Dropbox ç­‰ï¼‰
- âœ… å¯ä»¥ç›´æ¥ä»å…¶ä»–åº”ç”¨åˆ†äº«æ–‡ä»¶
- âœ… æƒé™ç®¡ç†æ›´ç¬¦åˆå®é™…ä½¿ç”¨åœºæ™¯
- âœ… æ€§èƒ½æ›´å¥½ï¼Œæ— å¡é¡¿

## ğŸ“Š å¯¹æ¯”æ€»ç»“

| ç‰¹æ€§ | iOS æ¨¡æ‹Ÿå™¨ | Android æ¨¡æ‹Ÿå™¨ | çœŸæœº |
|------|-----------|---------------|------|
| æ–‡ä»¶è®¿é—® | å—é™ âš ï¸ | å—é™ âš ï¸ | å®Œæ•´ âœ… |
| æ€§èƒ½ | ä¸€èˆ¬ | ä¸€èˆ¬ | æœ€ä½³ âœ… |
| æ–‡ä»¶æ·»åŠ  | éœ€æ‰‹åŠ¨æ‹–æ‹½ | éœ€ adb æ¨é€ | ç›´æ¥è®¿é—® âœ… |
| äº‘å­˜å‚¨ | æœ‰é™æ”¯æŒ | æœ‰é™æ”¯æŒ | å®Œæ•´æ”¯æŒ âœ… |
| æµ‹è¯•å‡†ç¡®æ€§ | ä¸­ç­‰ | ä¸­ç­‰ | æœ€é«˜ âœ… |

## ğŸ’¡ å¼€å‘å»ºè®®

1. **å¼€å‘é˜¶æ®µ**ï¼šä½¿ç”¨æ¨¡æ‹Ÿå™¨ + æ‰‹åŠ¨æ·»åŠ æµ‹è¯•æ–‡ä»¶
2. **æµ‹è¯•é˜¶æ®µ**ï¼šåˆ‡æ¢åˆ°çœŸæœºæµ‹è¯•
3. **è°ƒè¯•æ—¶**ï¼šæŸ¥çœ‹è¯¦ç»†æ—¥å¿—
   ```bash
   # iOS
   npx react-native log-ios
   
   # Android
   npx react-native log-android
   ```

4. **å‡†å¤‡å¤šä¸ªæµ‹è¯•æ–‡ä»¶**ï¼š
   - å°æ–‡ä»¶ï¼ˆ< 1MBï¼‰ï¼šå¿«é€Ÿæµ‹è¯•
   - ä¸­æ–‡ä»¶åï¼šæµ‹è¯•æ–‡ä»¶åå¤„ç†
   - å¤§æ–‡ä»¶ï¼ˆ> 10MBï¼‰ï¼šæµ‹è¯•æ€§èƒ½

## ğŸ” è°ƒè¯•æŠ€å·§

å¦‚æœä»ç„¶çœ‹ä¸åˆ°æ–‡ä»¶ï¼Œæ·»åŠ è°ƒè¯•æ—¥å¿—ï¼š

```typescript
// åœ¨ handleImport å‡½æ•°å¼€å§‹å¤„
console.log('[DEBUG] Platform:', Platform.OS);
console.log('[DEBUG] Picker Config:', JSON.stringify(pickerConfig));

// åœ¨æ–‡ä»¶é€‰æ‹©å
console.log('[DEBUG] Selected file URI:', file.uri);
console.log('[DEBUG] File exists:', await FileSystem.getInfoAsync(file.uri));
```

ç¥æµ‹è¯•é¡ºåˆ©ï¼ğŸ‰
