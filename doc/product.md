# 本地阅读器App - 需求文档

## 文档信息

- **项目名称**: 本地阅读器App
- **文档版本**: v1.0
- **创建日期**: 2025-01-03
- **技术栈**: React Native + Expo
- **目标平台**: iOS / Android

---

## 一、项目概述

### 1.1 产品定位

一款专注于本地电子书阅读的移动应用，支持多种格式(TXT、EPUB、PDF)，提供舒适的阅读体验和便捷的文件管理功能。

### 1.2 核心目标

- 流畅的阅读体验
- 简洁易用的界面
- 高效的本地文件管理
- 个性化阅读设置

### 1.3 目标用户

- 喜欢阅读电子书的用户
- 需要管理大量本地书籍的用户
- 追求个性化阅读体验的用户

---

## 二、功能需求

### 2.1 功能架构图

```
本地阅读器App
├── 书架模块
│   ├── 书籍展示
│   ├── 书籍管理
│   └── 搜索筛选
├── 阅读模块
│   ├── 阅读界面
│   ├── 阅读设置
│   ├── 目录导航
│   └── 文字操作
├── 导入模块
│   ├── 本地导入
│   ├── WiFi传书
│   └── 文件扫描
├── 书签笔记模块
│   ├── 书签管理
│   ├── 笔记管理
│   └── 高亮管理
└── 设置模块
    ├── 阅读偏好
    ├── 界面设置
    └── 数据管理
```

---

### 2.2 书架模块

#### 2.2.1 书籍展示

| 需求ID  | 需求描述                           | 优先级 | 说明                   |
| ------- | ---------------------------------- | ------ | ---------------------- |
| LIB-001 | 以网格或列表形式展示所有本地书籍   | P0     | 支持视图切换           |
| LIB-002 | 显示书籍封面、书名、作者、阅读进度 | P0     | 封面自动提取或使用默认 |
| LIB-003 | 显示书籍格式标签(TXT/EPUB/PDF)     | P1     | 便于识别文件类型       |
| LIB-004 | 显示文件大小                       | P2     | 可在设置中开关         |
| LIB-005 | 最近阅读书籍优先展示               | P0     | 按最后阅读时间排序     |
| LIB-006 | 空状态提示(无书籍时)               | P1     | 引导用户导入书籍       |

#### 2.2.2 书籍管理

| 需求ID  | 需求描述                     | 优先级 | 说明                     |
| ------- | ---------------------------- | ------ | ------------------------ |
| LIB-007 | 长按书籍进入编辑模式         | P0     | 可多选、删除             |
| LIB-008 | 删除书籍(含确认弹窗)         | P0     | 删除文件或仅移除记录可选 |
| LIB-009 | 编辑书籍信息(书名/作者/封面) | P1     | 弹窗编辑                 |
| LIB-010 | 批量删除功能                 | P1     | 多选后批量操作           |
| LIB-011 | 创建自定义分类/文件夹        | P2     | 如"小说"、"技术书"       |
| LIB-012 | 移动书籍到分类               | P2     | 配合分类功能             |
| LIB-013 | 收藏书籍功能                 | P2     | 标星收藏                 |

#### 2.2.3 搜索与筛选

| 需求ID  | 需求描述                       | 优先级 | 说明             |
| ------- | ------------------------------ | ------ | ---------------- |
| LIB-014 | 搜索书籍(书名/作者)            | P0     | 实时搜索         |
| LIB-015 | 按添加时间排序                 | P1     | 升序/降序        |
| LIB-016 | 按书名排序                     | P1     | A-Z排序          |
| LIB-017 | 按阅读进度筛选(未读/在读/已读) | P2     | 筛选器           |
| LIB-018 | 按文件格式筛选                 | P2     | 筛选TXT/EPUB/PDF |
| LIB-019 | 按分类筛选                     | P2     | 配合分类功能     |

---

### 2.3 阅读模块

#### 2.3.1 阅读界面

| 需求ID   | 需求描述                    | 优先级 | 说明               |
| -------- | --------------------------- | ------ | ------------------ |
| READ-001 | 沉浸式全屏阅读              | P0     | 隐藏状态栏和导航栏 |
| READ-002 | 轻触屏幕中央显示/隐藏菜单栏 | P0     | 淡入淡出动画       |
| READ-003 | 左右滑动翻页                | P0     | 支持手势翻页       |
| READ-004 | 点击屏幕左右区域翻页        | P1     | 可在设置中开关     |
| READ-005 | 显示实时阅读进度(百分比)    | P0     | 底部或顶部显示     |
| READ-006 | 显示当前章节名称            | P1     | 顶部标题           |
| READ-007 | 显示当前页码/总页数         | P2     | 底部显示           |
| READ-008 | 自动记忆阅读位置            | P0     | 退出后可恢复       |
| READ-009 | 横竖屏切换支持              | P1     | 自适应布局         |

#### 2.3.2 翻页功能

| 需求ID   | 需求描述           | 优先级 | 说明           |
| -------- | ------------------ | ------ | -------------- |
| READ-010 | 滑动翻页动画       | P0     | 平滑过渡       |
| READ-011 | 仿真翻页动画(可选) | P2     | 翻书效果       |
| READ-012 | 音量键翻页         | P1     | 可在设置中开关 |
| READ-013 | 自动翻页功能       | P2     | 可调节速度     |
| READ-014 | 滚动阅读模式       | P2     | 类似网页滚动   |

#### 2.3.3 阅读设置

| 需求ID   | 需求描述                  | 优先级 | 说明              |
| -------- | ------------------------- | ------ | ----------------- |
| READ-015 | 字体选择(系统字体+自定义) | P0     | 至少3种字体       |
| READ-016 | 字号调节(10-30号)         | P0     | 滑动条或按钮      |
| READ-017 | 行间距调节                | P0     | 1.0-3.0倍         |
| READ-018 | 段间距调节                | P1     | 影响段落间距      |
| READ-019 | 页边距调节                | P1     | 左右边距          |
| READ-020 | 背景颜色选择              | P0     | 至少5种预设颜色   |
| READ-021 | 自定义背景颜色            | P2     | 颜色选择器        |
| READ-022 | 护眼模式(绿色/米黄背景)   | P1     | 预设护眼配色      |
| READ-023 | 夜间模式                  | P0     | 深色背景+浅色文字 |
| READ-024 | 屏幕亮度调节(独立于系统)  | P0     | 仅在App内生效     |
| READ-025 | 屏幕常亮开关              | P1     | 阅读时不锁屏      |
| READ-026 | 翻页方式选择              | P1     | 滑动/点击/仿真    |

#### 2.3.4 目录功能

| 需求ID   | 需求描述         | 优先级 | 说明           |
| -------- | ---------------- | ------ | -------------- |
| READ-027 | 显示书籍目录     | P0     | 侧边抽屉或弹窗 |
| READ-028 | 当前章节高亮显示 | P0     | 视觉反馈       |
| READ-029 | 点击章节快速跳转 | P0     | 跳转后关闭目录 |
| READ-030 | 目录搜索功能     | P2     | 搜索章节名     |
| READ-031 | TXT智能分章      | P1     | 正则匹配章节   |
| READ-032 | 自定义章节规则   | P2     | 用户定义正则   |
| READ-033 | 手动标记章节     | P2     | TXT专用        |

#### 2.3.5 文字操作

| 需求ID   | 需求描述                  | 优先级 | 说明         |
| -------- | ------------------------- | ------ | ------------ |
| READ-034 | 长按文字弹出选择菜单      | P0     | 工具条       |
| READ-035 | 复制文字                  | P0     | 系统剪贴板   |
| READ-036 | 文内搜索                  | P1     | 高亮搜索结果 |
| READ-037 | 高亮文字(多色)            | P1     | 3-5种颜色    |
| READ-038 | 添加笔记                  | P1     | 绑定选中文字 |
| READ-039 | 添加书签                  | P0     | 快速标记位置 |
| READ-040 | 页面跳转(输入百分比/页码) | P1     | 弹窗输入     |

---

### 2.4 导入模块

#### 2.4.1 本地导入

| 需求ID  | 需求描述                 | 优先级 | 说明             |
| ------- | ------------------------ | ------ | ---------------- |
| IMP-001 | 从设备文件管理器选择文件 | P0     | 单个或多个文件   |
| IMP-002 | 支持TXT格式导入          | P0     | 支持多种编码     |
| IMP-003 | 支持EPUB格式导入         | P0     | 解析元数据       |
| IMP-004 | 支持PDF格式导入          | P0     | 基础渲染         |
| IMP-005 | 支持MOBI格式导入         | P2     | 转换为可读格式   |
| IMP-006 | 自动识别文件编码(TXT)    | P0     | UTF-8/GBK/GB2312 |
| IMP-007 | 自动提取书籍元数据       | P1     | 封面/书名/作者   |
| IMP-008 | 重复文件检测             | P1     | MD5或文件名对比  |
| IMP-009 | 导入进度显示             | P1     | 进度条           |
| IMP-010 | 批量导入功能             | P1     | 多文件同时导入   |

#### 2.4.2 WiFi传书

| 需求ID  | 需求描述           | 优先级 | 说明                         |
| ------- | ------------------ | ------ | ---------------------------- |
| IMP-011 | 启动WiFi传书服务   | P1     | 显示IP地址和端口             |
| IMP-012 | 生成局域网访问地址 | P1     | 如 http://192.168.1.100:8080 |
| IMP-013 | 网页端文件上传界面 | P1     | 拖拽或选择文件               |
| IMP-014 | 实时同步上传进度   | P1     | 进度条显示                   |
| IMP-015 | 自动导入上传的文件 | P1     | 无需手动操作                 |
| IMP-016 | 二维码扫码连接     | P2     | 快速访问                     |

#### 2.4.3 文件扫描

| 需求ID  | 需求描述           | 优先级 | 说明        |
| ------- | ------------------ | ------ | ----------- |
| IMP-017 | 扫描指定文件夹     | P2     | 如Downloads |
| IMP-018 | 自动发现新增电子书 | P2     | 后台监听    |
| IMP-019 | 文件夹路径自定义   | P2     | 用户选择    |

---

### 2.5 书签笔记模块

#### 2.5.1 书签管理

| 需求ID   | 需求描述               | 优先级 | 说明         |
| -------- | ---------------------- | ------ | ------------ |
| NOTE-001 | 查看所有书签列表       | P0     | 按书籍分组   |
| NOTE-002 | 显示书签位置和上下文   | P0     | 书签预览     |
| NOTE-003 | 点击书签跳转到对应位置 | P0     | 打开书籍     |
| NOTE-004 | 删除书签               | P0     | 滑动删除     |
| NOTE-005 | 编辑书签备注           | P1     | 添加说明文字 |
| NOTE-006 | 书签搜索               | P2     | 搜索备注内容 |

#### 2.5.2 笔记管理

| 需求ID   | 需求描述               | 优先级 | 说明       |
| -------- | ---------------------- | ------ | ---------- |
| NOTE-007 | 查看所有笔记列表       | P1     | 按书籍分组 |
| NOTE-008 | 显示笔记关联的原文     | P1     | 上下文展示 |
| NOTE-009 | 点击笔记跳转到对应位置 | P1     | 打开书籍   |
| NOTE-010 | 编辑笔记内容           | P1     | 富文本编辑 |
| NOTE-011 | 删除笔记               | P1     | 滑动删除   |
| NOTE-012 | 笔记搜索               | P2     | 全文搜索   |
| NOTE-013 | 导出笔记为文件(TXT/MD) | P2     | 分享或备份 |

#### 2.5.3 高亮管理

| 需求ID   | 需求描述               | 优先级 | 说明         |
| -------- | ---------------------- | ------ | ------------ |
| NOTE-014 | 查看所有高亮文字       | P1     | 按书籍分组   |
| NOTE-015 | 按颜色分类显示高亮     | P2     | 不同颜色含义 |
| NOTE-016 | 点击高亮跳转到对应位置 | P1     | 打开书籍     |
| NOTE-017 | 取消高亮               | P1     | 删除标记     |
| NOTE-018 | 修改高亮颜色           | P2     | 重新选择颜色 |

---

### 2.6 设置模块

#### 2.6.1 阅读偏好

| 需求ID  | 需求描述         | 优先级 | 说明           |
| ------- | ---------------- | ------ | -------------- |
| SET-001 | 设置默认字体     | P0     | 应用于所有书籍 |
| SET-002 | 设置默认字号     | P0     | 14-20号推荐    |
| SET-003 | 设置默认主题     | P0     | 浅色/深色/护眼 |
| SET-004 | 设置翻页动画     | P1     | 滑动/仿真/无   |
| SET-005 | 音量键翻页开关   | P1     | 默认开启       |
| SET-006 | 翻页振动反馈开关 | P2     | 默认关闭       |
| SET-007 | 长按菜单弹出速度 | P2     | 快/中/慢       |

#### 2.6.2 界面设置

| 需求ID  | 需求描述                     | 优先级 | 说明              |
| ------- | ---------------------------- | ------ | ----------------- |
| SET-008 | 书架视图选择(网格/列表)      | P1     | 默认网格          |
| SET-009 | 书架排序方式                 | P1     | 最近阅读/添加时间 |
| SET-010 | 应用主题(浅色/深色/跟随系统) | P1     | 整体UI风格        |
| SET-011 | 显示文件大小开关             | P2     | 书架显示          |
| SET-012 | 显示文件格式标签开关         | P2     | 书架显示          |

#### 2.6.3 存储设置

| 需求ID  | 需求描述         | 优先级 | 说明         |
| ------- | ---------------- | ------ | ------------ |
| SET-013 | 查看书籍存储位置 | P1     | 显示路径     |
| SET-014 | 自动备份阅读进度 | P1     | 本地数据库   |
| SET-015 | 清理缓存         | P1     | 显示缓存大小 |
| SET-016 | 导出阅读数据     | P2     | JSON格式     |
| SET-017 | 导入阅读数据     | P2     | 恢复进度     |
| SET-018 | 导出设置配置     | P2     | 备份设置     |
| SET-019 | 导入设置配置     | P2     | 恢复设置     |

#### 2.6.4 高级设置

| 需求ID  | 需求描述           | 优先级 | 说明         |
| ------- | ------------------ | ------ | ------------ |
| SET-020 | 自定义章节识别规则 | P2     | 正则表达式   |
| SET-021 | TXT文件编码设置    | P1     | 默认自动识别 |
| SET-022 | PDF渲染质量        | P2     | 低/中/高     |
| SET-023 | 内存优化选项       | P2     | 低内存设备   |

#### 2.6.5 其他设置

| 需求ID  | 需求描述      | 优先级 | 说明          |
| ------- | ------------- | ------ | ------------- |
| SET-024 | 语言设置      | P1     | 中文/英文     |
| SET-025 | 关于页面      | P1     | 版本号/开发者 |
| SET-026 | 使用帮助/教程 | P2     | 新手引导      |
| SET-027 | 意见反馈      | P2     | 邮件或表单    |
| SET-028 | 检查更新      | P2     | 自动/手动     |

---

### 2.7 扩展功能(可选)

#### 2.7.1 阅读统计

| 需求ID  | 需求描述               | 优先级 | 说明        |
| ------- | ---------------------- | ------ | ----------- |
| EXT-001 | 总阅读时长统计         | P2     | 累计时间    |
| EXT-002 | 今日/本周/本月阅读时长 | P2     | 图表展示    |
| EXT-003 | 阅读书籍数量统计       | P2     | 总数/完成数 |
| EXT-004 | 阅读速度统计           | P2     | 字/分钟     |
| EXT-005 | 阅读时间分布图         | P2     | 按小时统计  |

#### 2.7.2 听书功能

| 需求ID  | 需求描述                   | 优先级 | 说明         |
| ------- | -------------------------- | ------ | ------------ |
| EXT-006 | 文字转语音(TTS)            | P2     | 系统TTS引擎  |
| EXT-007 | 播放控制(播放/暂停/上下章) | P2     | 控制面板     |
| EXT-008 | 语速调节                   | P2     | 0.5x-2.0x    |
| EXT-009 | 定时关闭                   | P2     | 倒计时停止   |
| EXT-010 | 后台播放                   | P2     | 锁屏继续播放 |

#### 2.7.3 其他功能

| 需求ID  | 需求描述               | 优先级 | 说明         |
| ------- | ---------------------- | ------ | ------------ |
| EXT-011 | 应用锁(密码/指纹/面容) | P2     | 隐私保护     |
| EXT-012 | 护眼提醒(定时休息)     | P2     | 每30分钟提醒 |
| EXT-013 | 繁简转换               | P2     | TXT专用      |
| EXT-014 | 竖排阅读               | P2     | 古籍阅读     |
| EXT-015 | 自定义字体导入         | P2     | TTF/OTF格式  |

---

## 三、非功能需求

### 3.1 性能要求

| 需求ID   | 需求描述              | 指标              |
| -------- | --------------------- | ----------------- |
| PERF-001 | 应用启动时间          | < 2秒             |
| PERF-002 | 书架加载时间(100本书) | < 1秒             |
| PERF-003 | 打开书籍时间          | < 1.5秒           |
| PERF-004 | 翻页响应时间          | < 100ms           |
| PERF-005 | 页面渲染帧率          | 60fps             |
| PERF-006 | 大文件(>10MB)加载     | 分块加载，不卡顿  |
| PERF-007 | 内存占用              | < 200MB(正常阅读) |

### 3.2 兼容性要求

| 需求ID   | 需求描述        | 说明         |
| -------- | --------------- | ------------ |
| COMP-001 | iOS系统版本     | iOS 13.0+    |
| COMP-002 | Android系统版本 | Android 8.0+ |
| COMP-003 | 屏幕尺寸适配    | 4.7寸-12.9寸 |
| COMP-004 | 横竖屏适配      | 完整支持     |
| COMP-005 | 深色模式适配    | 跟随系统     |

### 3.3 数据要求

| 需求ID   | 需求描述         | 说明                 |
| -------- | ---------------- | -------------------- |
| DATA-001 | 数据本地存储     | SQLite或AsyncStorage |
| DATA-002 | 阅读进度实时保存 | 每翻页保存           |
| DATA-003 | 数据备份         | 支持导出导入         |
| DATA-004 | 数据加密(可选)   | 应用锁功能           |

### 3.4 用户体验要求

| 需求ID | 需求描述     | 说明              |
| ------ | ------------ | ----------------- |
| UX-001 | 界面响应流畅 | 无卡顿感          |
| UX-002 | 动画自然     | 淡入淡出/滑动     |
| UX-003 | 操作反馈及时 | 按钮点击/触觉反馈 |
| UX-004 | 错误提示友好 | 清晰的错误信息    |
| UX-005 | 首次使用引导 | 新手教程(可选)    |

---

## 四、文件格式支持

### 4.1 TXT格式

| 功能         | 说明                         |
| ------------ | ---------------------------- |
| 编码支持     | UTF-8, GBK, GB2312, Big5     |
| 自动识别编码 | 优先级：UTF-8 > GBK > GB2312 |
| 智能分章     | 正则匹配"第X章"等模式        |
| 自定义分章   | 用户定义正则表达式           |
| 繁简转换     | 可选功能                     |

### 4.2 EPUB格式

| 功能       | 说明                     |
| ---------- | ------------------------ |
| 元数据提取 | 书名、作者、封面、出版社 |
| 目录解析   | 显示原书目录结构         |
| HTML渲染   | 渲染EPUB内部HTML         |
| 样式保留   | 可选保留原书样式         |
| 图片显示   | 支持内嵌图片             |

### 4.3 PDF格式

| 功能     | 说明               |
| -------- | ------------------ |
| 页面渲染 | 矢量渲染，支持缩放 |
| 分页显示 | 按PDF原始分页      |
| 缩放平移 | 双指缩放、拖拽平移 |
| 夜间模式 | 反色显示           |
| 文本提取 | 可选功能(部分PDF)  |

---
